<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>HexJS Test</title>
        <style>
        p{margin:0;line-height:1.5;}
        </style>
        <script src="../build/hex-min.js"></script>
        <script src="http://static.edgar.im/sys/jquery/jquery.js"></script>
        <script>
            hexjs.define( 'test', function( require, exports ){
                var $result = jQuery('#output');
                
                var createItem = function( inner ){
                    return jQuery('<p/>').html(inner).appendTo($result);
                };
                
                exports.print = function( message ){
                    createItem( message );
                };
            } );
            
            
            hexjs.define( 'aa', function( require, exports, module ){
                exports.variable = 'require module a';
            } );
            hexjs.define( 'ab', function( require, exports, module ){
                exports.variable = 'require module b';
            } );
            hexjs.define(function( require ){
                var test = require('test'), a;
                test.print('<strong>测试根据条件require不同module：</strong>');
                if ( false ){
                    test.print(require('aa').variable);
                } else {
                    test.print(require('ab').variable);
                }
            }).register();
            
            
            hexjs.define( 'ba', function( require, exports ){
                var test = require('test');
                test.print( Date.now() + ' module a' );
                var v = exports.variable = 1;
                test.print( Date.now() + ' module a: ' + v );
            } );
            hexjs.define( 'bb', function( require, exports ){
                var test = require('test');
                test.print( Date.now() + ' module b' );
                var v = exports.variable = require('ba').variable + 1;
                test.print( Date.now() + ' module b: ' + v );
            } );
            hexjs.define( 'bc', function( require, exports ){
                var test = require('test');
                test.print( Date.now() + ' module c' );
                var v = exports.variable = require('bb').variable + 1;
                test.print( Date.now() + ' module c: ' + v );
            } );
            hexjs.define(function( require ){ 
                var test = require('test');
                test.print('<strong>测试线性嵌套require各module（ d > c > b > a ），各module的执行顺序：</strong>');
                test.print( Date.now() + ' module d start');
                var v = require('bc').variable + 1;
                test.print( Date.now() + ' module d: '+ v );
                test.print( Date.now() + ' module d end' );
            }).register();
            
            //var a = hexjs.noConflict();
            
            //a.define(function(require){require('test').print('noConflict is ok')}).register();
            
            //var a = hexjs.noConflict(true);
            //hexjs.noConflict();
            //define(function(require){require('test').print('noConflict is ok')}).register();
            //a.noConflict(false);
        </script>
    </head>
    <body style="width:800px;margin:0 auto;">
        <h1>HexJS Test</h1>
        <div id="output">
            
        </div>
        <script src="http://static.edgar.im/app/ga/org.js"></script>
    </body>
</html>
